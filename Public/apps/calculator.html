<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Calculator-AKADEMIA</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: 'SF Pro Text', -apple-system, BlinkMacSystemFont, sans-serif;
            background: #f5f7fa;
            color: #2c3e50;
            width: 320px;
            height: 480px;
            overflow: hidden;
            position: relative;
        }

        /* Perfect Fit Container */
        .calculator-container {
            width: 100%;
            height: 100%;
            padding: 10px 12px;
            background: #ffffff;
            display: flex;
            flex-direction: column;
        }

        /* Optimized Header */
        .calc-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
            height: 24px;
            flex-shrink: 0;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .logo i {
            font-size: 14px;
            color: #2980b9;
        }

        .logo-text {
            font-size: 13px;
            font-weight: 600;
            color: #2980b9;
            letter-spacing: -0.3px;
        }

        .theme-toggle {
            background: rgba(52, 152, 219, 0.1);
            border: none;
            color: #3498db;
            width: 24px;
            height: 24px;
            border-radius: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 11px;
            flex-shrink: 0;
        }

        /* Optimized Display */
        .display-container {
            background: #f8f9fa;
            border-radius: 6px;
            padding: 10px 12px;
            margin-bottom: 10px;
            border: 1px solid rgba(52, 152, 219, 0.1);
            flex-shrink: 0;
            min-height: 80px;
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
        }

        .current-operation {
            font-size: 13px;
            color: #7f8c8d;
            margin-bottom: 4px;
            min-height: 16px;
            word-break: break-all;
            text-align: right;
            font-weight: 400;
        }

        .result {
            font-size: 30px;
            font-weight: 300;
            line-height: 1;
            margin-bottom: 2px;
            word-break: break-all;
            text-align: right;
            color: #2c3e50;
            font-family: 'SF Mono', 'Menlo', monospace;
            min-height: 34px;
        }

        .memory-indicator {
            font-size: 10px;
            color: #3498db;
            display: flex;
            justify-content: space-between;
            padding-top: 6px;
            border-top: 1px solid rgba(52, 152, 219, 0.1);
        }

        /* Optimized Memory Row */
        .memory-row {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 5px;
            margin-bottom: 8px;
            flex-shrink: 0;
        }

        .memory-btn {
            height: 24px;
            font-size: 11px;
            border-radius: 3px;
            background: rgba(52, 152, 219, 0.08);
            color: #3498db;
            border: 1px solid rgba(52, 152, 219, 0.1);
            cursor: pointer;
            font-weight: 500;
        }

        /* Perfect Fit Keypad */
        .keypad {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 5px;
            flex: 1;
            min-height: 0;
        }

        .key {
            border: none;
            border-radius: 0;
            font-size: 16px;
            font-weight: 500;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.1s ease;
            user-select: none;
            -webkit-user-select: none;
            min-height: 0;
        }

        /* Button Color Schemes */
        .light-blue {
            background: #e8f4fc;
            color: #2980b9;
            border: 1px solid rgba(52, 152, 219, 0.1);
        }

        .medium-blue {
            background: #3498db;
            color: white;
            border: 1px solid #2980b9;
        }

        .dark-blue {
            background: #1a5276;
            color: white;
            border: 1px solid #154360;
        }

        .accent-blue {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            border: 1px solid #2980b9;
        }

        .white {
            background: #ffffff;
            color: #2c3e50;
            border: 1px solid rgba(52, 152, 219, 0.1);
            font-weight: 500;
        }

        /* Zero button spans 2 columns */
        .key.zero {
            grid-column: span 2;
            justify-content: flex-start;
            padding-left: 18px;
        }

        /* Icon buttons */
        .icon-btn {
            font-size: 12px;
        }

        /* Dark mode */
        body.dark-mode {
            background: #1a1a2e;
            color: #ecf0f1;
        }

        body.dark-mode .calculator-container {
            background: #1a1a2e;
        }

        body.dark-mode .display-container {
            background: #2c3e50;
            border: 1px solid rgba(52, 152, 219, 0.2);
        }

        body.dark-mode .current-operation {
            color: #bdc3c7;
        }

        body.dark-mode .result {
            color: #ecf0f1;
        }

        body.dark-mode .memory-indicator {
            color: #3498db;
            border-top: 1px solid rgba(52, 152, 219, 0.2);
        }

        body.dark-mode .white {
            background: #2c3e50;
            color: #ecf0f1;
            border: 1px solid rgba(52, 152, 219, 0.2);
        }

        body.dark-mode .light-blue {
            background: #2c3e50;
            color: #3498db;
            border: 1px solid rgba(52, 152, 219, 0.2);
        }

        body.dark-mode .memory-btn {
            background: rgba(52, 152, 219, 0.15);
            border: 1px solid rgba(52, 152, 219, 0.2);
            color: #3498db;
        }

        /* Key press animation */
        .key.pressed {
            transform: scale(0.95);
        }

        /* Focus outline */
        .key:focus {
            outline: 1px solid #3498db;
            outline-offset: 1px;
        }
    </style>
</head>
<body>
    <!-- Calculator Container - Perfect 320x480 Fit -->
    <div class="calculator-container">
        <!-- Optimized Header -->
        <div class="calc-header">
            <div class="logo">
                <i class="fas fa-calculator"></i>
                <div class="logo-text">AKADEMIA</div>
            </div>
            <button class="theme-toggle" id="theme-toggle">
                <i class="fas fa-moon" id="theme-icon"></i>
            </button>
        </div>

        <!-- Display -->
        <div class="display-container">
            <div class="current-operation" id="current-operation"></div>
            <div class="result" id="result">0</div>
            <div class="memory-indicator">
                <span id="memory-status">M: 0</span>
                <span id="angle-mode">DEG</span>
            </div>
        </div>

        <!-- Memory Buttons -->
        <div class="memory-row">
            <button class="memory-btn" data-action="memory-clear">MC</button>
            <button class="memory-btn" data-action="memory-recall">MR</button>
            <button class="memory-btn" data-action="memory-add">M+</button>
            <button class="memory-btn" data-action="memory-subtract">M-</button>
            <button class="memory-btn" data-action="memory-store">MS</button>
        </div>

        <!-- Keypad -->
        <div class="keypad">
            <!-- Row 1 -->
            <button class="key light-blue" data-action="clear" id="clear-btn">
                <span id="clear-text">AC</span>
            </button>
            <button class="key light-blue" data-action="sign">
                <i class="fas fa-plus-minus icon-btn"></i>
            </button>
            <button class="key light-blue" data-action="percentage">
                <i class="fas fa-percent icon-btn"></i>
            </button>
            <button class="key accent-blue" data-action="divide">
                <i class="fas fa-divide icon-btn"></i>
            </button>

            <!-- Row 2 -->
            <button class="key white" data-number="7">7</button>
            <button class="key white" data-number="8">8</button>
            <button class="key white" data-number="9">9</button>
            <button class="key accent-blue" data-action="multiply">
                <i class="fas fa-times icon-btn"></i>
            </button>

            <!-- Row 3 -->
            <button class="key white" data-number="4">4</button>
            <button class="key white" data-number="5">5</button>
            <button class="key white" data-number="6">6</button>
            <button class="key accent-blue" data-action="subtract">
                <i class="fas fa-minus icon-btn"></i>
            </button>

            <!-- Row 4 -->
            <button class="key white" data-number="1">1</button>
            <button class="key white" data-number="2">2</button>
            <button class="key white" data-number="3">3</button>
            <button class="key accent-blue" data-action="add">
                <i class="fas fa-plus icon-btn"></i>
            </button>

            <!-- Row 5 -->
            <button class="key white zero" data-number="0">0</button>
            <button class="key white" data-action="decimal">.</button>
            <button class="key dark-blue" data-action="equals">
                <i class="fas fa-equals icon-btn"></i>
            </button>
        </div>
    </div>

    <script>
        // Same calculator logic as before, just the CSS is optimized
        const calculator = {
            displayValue: '0',
            firstOperand: null,
            waitingForSecondOperand: false,
            operator: null,
            currentOperation: '',
            memoryValue: 0,
            isClearButton: true,
            isDarkMode: false
        };

        const resultElement = document.getElementById('result');
        const currentOperationElement = document.getElementById('current-operation');
        const clearTextElement = document.getElementById('clear-text');
        const memoryStatusElement = document.getElementById('memory-status');
        const themeToggle = document.getElementById('theme-toggle');
        const themeIcon = document.getElementById('theme-icon');

        function updateDisplay() {
            resultElement.textContent = calculator.displayValue;
            currentOperationElement.textContent = calculator.currentOperation;
            clearTextElement.textContent = calculator.isClearButton ? 'AC' : 'C';
            memoryStatusElement.textContent = `M: ${calculator.memoryValue}`;
        }

        function inputDigit(digit) {
            const { displayValue, waitingForSecondOperand } = calculator;
            
            if (waitingForSecondOperand) {
                calculator.displayValue = digit;
                calculator.waitingForSecondOperand = false;
                calculator.isClearButton = false;
            } else {
                calculator.displayValue = displayValue === '0' ? digit : displayValue + digit;
                calculator.isClearButton = false;
            }
            updateDisplay();
        }

        function inputDecimal() {
            if (calculator.waitingForSecondOperand) {
                calculator.displayValue = '0.';
                calculator.waitingForSecondOperand = false;
                calculator.isClearButton = false;
                updateDisplay();
                return;
            }
            
            if (!calculator.displayValue.includes('.')) {
                calculator.displayValue += '.';
                calculator.isClearButton = false;
                updateDisplay();
            }
        }

        function handleOperator(nextOperator) {
            const inputValue = parseFloat(calculator.displayValue);
            
            if (calculator.operator && calculator.waitingForSecondOperand) {
                calculator.operator = nextOperator;
                calculator.currentOperation = calculator.currentOperation.slice(0, -1) + getOperatorSymbol(nextOperator);
                updateDisplay();
                return;
            }
            
            if (calculator.firstOperand === null) {
                calculator.firstOperand = inputValue;
            } else if (calculator.operator) {
                const result = performCalculation();
                calculator.displayValue = `${parseFloat(result.toFixed(8))}`;
                calculator.firstOperand = result;
            }
            
            calculator.waitingForSecondOperand = true;
            calculator.operator = nextOperator;
            calculator.currentOperation = `${calculator.displayValue} ${getOperatorSymbol(nextOperator)}`;
            calculator.isClearButton = true;
            updateDisplay();
        }

        function getOperatorSymbol(operator) {
            const symbols = {
                'add': '+',
                'subtract': '−',
                'multiply': '×',
                'divide': '÷'
            };
            return symbols[operator] || operator;
        }

        function performCalculation() {
            const { firstOperand, displayValue, operator } = calculator;
            const inputValue = parseFloat(displayValue);
            
            if (operator === 'add') return firstOperand + inputValue;
            if (operator === 'subtract') return firstOperand - inputValue;
            if (operator === 'multiply') return firstOperand * inputValue;
            if (operator === 'divide') return inputValue === 0 ? 'Error' : firstOperand / inputValue;
            return inputValue;
        }

        function handleEquals() {
            const inputValue = parseFloat(calculator.displayValue);
            
            if (calculator.operator === null || calculator.firstOperand === null) return;
            
            const result = performCalculation();
            
            if (result === 'Error') {
                calculator.displayValue = 'Error';
                calculator.firstOperand = null;
                calculator.waitingForSecondOperand = false;
                calculator.operator = null;
                calculator.currentOperation = '';
                calculator.isClearButton = true;
            } else {
                calculator.displayValue = `${parseFloat(result.toFixed(8))}`;
                calculator.currentOperation += ` ${inputValue} =`;
                calculator.firstOperand = null;
                calculator.waitingForSecondOperand = false;
                calculator.operator = null;
                calculator.isClearButton = true;
            }
            updateDisplay();
        }

        function handleClear() {
            if (calculator.isClearButton) {
                calculator.displayValue = '0';
                calculator.firstOperand = null;
                calculator.waitingForSecondOperand = false;
                calculator.operator = null;
                calculator.currentOperation = '';
                calculator.isClearButton = true;
            } else {
                calculator.displayValue = '0';
                calculator.isClearButton = true;
            }
            updateDisplay();
        }

        function handlePercentage() {
            const currentValue = parseFloat(calculator.displayValue);
            calculator.displayValue = (currentValue / 100).toString();
            calculator.currentOperation = `${currentValue}%`;
            calculator.isClearButton = false;
            updateDisplay();
        }

        function toggleSign() {
            if (calculator.displayValue !== '0') {
                calculator.displayValue = String(-parseFloat(calculator.displayValue));
                calculator.isClearButton = false;
                updateDisplay();
            }
        }

        function handleMemory(action) {
            const currentValue = parseFloat(calculator.displayValue);
            
            switch(action) {
                case 'memory-clear': calculator.memoryValue = 0; break;
                case 'memory-recall': calculator.displayValue = calculator.memoryValue.toString(); break;
                case 'memory-add': calculator.memoryValue += currentValue; break;
                case 'memory-subtract': calculator.memoryValue -= currentValue; break;
                case 'memory-store': calculator.memoryValue = currentValue; break;
            }
            updateDisplay();
        }

        function toggleTheme() {
            calculator.isDarkMode = !calculator.isDarkMode;
            document.body.classList.toggle('dark-mode', calculator.isDarkMode);
            themeIcon.className = calculator.isDarkMode ? 'fas fa-sun' : 'fas fa-moon';
        }

        function handleButtonClick(event) {
            const button = event.target.closest('button');
            if (!button) return;
            
            button.classList.add('pressed');
            setTimeout(() => button.classList.remove('pressed'), 100);
            
            const action = button.dataset.action;
            const number = button.dataset.number;
            
            if (number) inputDigit(number);
            else if (action === 'decimal') inputDecimal();
            else if (action === 'clear') handleClear();
            else if (action === 'sign') toggleSign();
            else if (action === 'percentage') handlePercentage();
            else if (['add', 'subtract', 'multiply', 'divide'].includes(action)) handleOperator(action);
            else if (action === 'equals') handleEquals();
            else if (action && action.startsWith('memory-')) handleMemory(action);
        }

        document.querySelector('.keypad').addEventListener('click', handleButtonClick);
        document.querySelector('.memory-row').addEventListener('click', handleButtonClick);
        themeToggle.addEventListener('click', toggleTheme);
        updateDisplay();
    </script>
</body>
</html>
